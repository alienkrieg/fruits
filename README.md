# FRUITS
(**F**eature Ext**R**action **U**sing **IT**erated **S**ums)

## Installation
This package can be installed on your local machine by executing the file [setup.py](setup.py).
```
  $ python setup.py install
```

## Pipeline
The `fruits` package works as a pipeline that extracts features from multidimensional time series data.<br>
To initialize the data one has to create a `fruits.Fruit` object. This object can now be customized by the user in three different ways. There are standard configurations and objects for each of the following steps in `fruits` available to choose from.
- Data Preparation: `DataPreparateur` objects are used to preprocess the data. This is an optional step.
- Calculation of Iterated Sums: `SummationIterator` objects specify which Iterated Sums should be calculated<br>
  For example:<br>`<[11], ISS(X)>=numpy.cumsum([x^2 for x in X])` is the result of `fruits.core.ISS(X, [fruits.iterators.SimpleWord("[11]")])`
- Feature Sieving: `FeatureSieve` objects have to be specified in order to extract the actual results of this pipeline from the results of the previous step(s).<br>
  The total number of features per time series is `[number of FeatureSieve objects] * [number of SummationIterator objects]`.
  
## Example
A simple example could look like this:
```python
X = numpy.array([...]) # think of a 3 dimensional time series dataset

# create a Fruit object
myfruit = fruits.Fruit("myfruit - Fruit class example")

# add a DataPreparateur to it by using predefined ones from fruits.preparateurs
myfruit.add(fruits.preparateurs.INC(zero_padding=True))

# generate simple SummationIterator objects (i.e. SimpleWords)
simple_words = fruits.iterators.generate_words(
                                dim=3,
                                monomial_length=2,
                                n_monomials=1)
# simple_words is now a list of words in the extended alphabet generated by {1,2,3}:
# [1], [2], [3], [11], [22], [33], [12], [13], [23]

# add the iterators to the class instance
myfruit.add(simple_words)

# choose from a variety of FeatureFilter objects in fruits.features
myfruit.add(fruits.features.PPV(quantile=0.5, constant=False))
myfruit.add(fruits.features.MAX)

# 2*9 = 20 features for each time series
extracted_features = myfruit(X)
```

## UCR-Experiments
We test the pipeline for accuracy by doing classification experiments of some UCR-datasets. You can [download](https://www.timeseriesclassification.com/Downloads/Archives/Univariate2018_arff.zip) them from [timeseriesclassification.com](https://timeseriesclassification.com) and execute the script [configurations_on_ucr.py](experiments/configurations_on_ucr.py) after configuring the self-explaining global variables in the script. This will produce an output file that contains the classification-accuracy results.

## Unit tests
There are a bunch of tests for __fruits__ available to execute. To do this, enter the command
```
  $ python -m pytest tests
```
in a console from the main directory of this repository.
